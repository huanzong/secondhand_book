<!DOCTYPE html>
<html xmlns:v-on="http://www.w3.org/1999/xhtml">
	<head lang="en">
		<meta charset="utf-8" />
		<title>我的订单</title>
		<link rel="stylesheet" type="text/css" href="../css/public.css"/>
		<link rel="stylesheet" type="text/css" href="../css/myorder.css" />
		<script src="../js/vue.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/jquery-3.3.1.min.js"></script>
		<script src="../js/jquery-1.12.4.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/public.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/user.js" type="text/javascript" charset="utf-8"></script>

	</head>
	<body>
		<!------------------------------head------------------------------>
		<div class="head ding">
			<div class="wrapper clearfix">
				<div class="clearfix" id="top">
					<h1 class="fl"><a href="index.html"><img src="../images/logo.png" style="margin-top: -20px;"/></a></h1>
					<div class="fr clearfix" id="top1">
						<p class="fl">
							<a href="#" id="login">登录</a>
							<a href="#" id="reg">注册</a>
						</p>
						<form action="#" method="get" class="fl">
							<input type="text" placeholder="搜索" />
							<input type="button" />
						</form>
					</div>
				</div>
				<ul class="clearfix" id="bott">
					<li><a href="index.html">首页</a></li>
					<li>
						<a href="flowerDer.html">考试教育</a>
						<div class="sList2">
							<div class="clearfix">
								<a href="../flowerDer.html">公务员考试</a>
								<a href="../flowerDer.html">英语考试</a>
								<a href="../flowerDer.html">考研</a>
								<a href="../flowerDer.html">其他考试</a>
								<a href="../flowerDer.html">职称考试</a>
								<a href="../flowerDer.html">教辅书</a>
								<a href="../flowerDer.html">工具书</a>
							</div>
						</div>
					</li>
					<li>
						<a href="decoration.html">经济管理</a>
						<div class="sList2">
							<div class="clearfix">
								<a href="../flowerDer.html">成功励志</a>
								<a href="../flowerDer.html">管理</a>
								<a href="../flowerDer.html">经济金融</a>
							</div>
						</div>
					</li>
					<li>
						<a href="paint.html">文学艺术</a>
						<div class="sList2">
							<div class="clearfix">
								<a href="../flowerDer.html">收藏鉴赏</a>
								<a href="../flowerDer.html">艺术</a>
								<a href="../flowerDer.html">文学小说</a>
								<a href="../flowerDer.html">文化历史</a>
							</div>
						</div>
					</li>
					<li>
						<a href="../flowerDer.html">人文社科</a>
						<div class="sList2">
							<div class="clearfix">
								<a href="../flowerDer.html">新闻传播</a>
								<a href="../flowerDer.html">心理</a>
								<a href="../flowerDer.html">法律</a>
								<a href="../flowerDer.html">自然科学</a>
								<a href="../flowerDer.html">社会科学</a>
								<a href="../flowerDer.html">政治军事</a>
								<a href="../flowerDer.html">宗教哲学</a>
								<a href="../flowerDer.html">语言学习</a>
							</div>
						</div>
					</li>
					<li>
						<a href="../flowerDer.html">科学技术</a>
						<div class="sList2">
							<div class="clearfix">
								<a href="../flowerDer.html">汽车与交通运输</a>
								<a href="../flowerDer.html">医学卫生</a>
								<a href="../flowerDer.html">计算机与网络</a>
								<a href="../flowerDer.html">科技工程</a>
								<a href="../flowerDer.html">建筑</a>
							</div>
						</div>
					</li>
					<li>
						<a href="../flowerDer.html">生活休闲</a>
						<div class="sList2">
							<div class="clearfix">
								<a href="../flowerDer.html">生活时尚</a>
								<a href="../flowerDer.html">家庭育儿</a>
								<a href="../flowerDer.html">旅游地理</a>
								<a href="../flowerDer.html">体育保健</a>
								<a href="../flowerDer.html">少儿</a>
							</div>
						</div>
					</li>
				</ul>
			</div>
		</div>
		<!------------------------------idea------------------------------>
		<div class="address mt">
			<div class="wrapper clearfix">
				<a href="#" class="fl">首页</a>
				<span>/</span>
				<a href="mygxin.html">个人中心</a>
				<span>/</span>
				<a href="myorderq.html" class="on">我的订单</a>
			</div>
		</div>
		
		<!------------------------------Bott------------------------------>
		<div class="Bott" id="app">
			<div class="wrapper clearfix">
				<div class="zuo fl">
					<h3>
						<a href="#"><img src="../images/tx.png" id="touxiang" width="90px" height="90px"/></a>
						<p class="clearfix"><span class="fl">[黄琦]</span><span class="fr">[注销]</span></p>
					</h3>
					<div>
						<h4>我的交易</h4>
						<ul>
							<li><a href="start.html">我的收藏</a></li>
							<li><a href="myorderq.html">我的订单</a></li>
							<li><a href="mysell.html">我售出的</a></li>
						</ul>
						<h4>个人中心</h4>
						<ul>
							<li><a href="mygxin.html">我的中心</a></li>
							<li><a href="address.html">地址管理</a></li>
							<li><a href="sellbook.html">发布书籍</a></li>
						</ul>
						<h4>账户管理</h4>
						<ul>
							<li class="on"><a href="mygrxx.html">个人信息</a></li>
							<li><a href="remima.html">修改密码</a></li>
						</ul>
					</div>
				</div>
				<div class="you fl">
					<div class="my clearfix">
						<h2 class="fl">我的订单</h2>
						<a href="#" class="fl">请谨防钓鱼链接或诈骗电话</a>
					</div>
					<div class="dlist clearfix">
						<ul class="fl clearfix" id="wa">
							<li class="on"><a href="#2">全部有效订单</a></li>
							<li><a href="#2">已收货</a></li>
							<li><a href="#2l">待收货</a></li>
							<li><a href="#2">已取消</a></li>
						</ul>
					</div>

					<div class="dkuang deng" v-for="item,index in datalist">
						<p class="one" v-if="item.orderStatus==1">已收货</p>
						<p class="one" v-if="item.orderStatus==0">待收货</p>
						<p class="one" v-if="item.orderStatus==2">已取消</p>
						<div class="word clearfix">
							<ul class="fl clearfix">
								<li>{{item.orderTime}}</li>
								<li>{{item.receiverName}}</li>
								<li>{{item.orderId}}</li>
							</ul>
							<p class="fr">订单金额：<span>{{item.bookPrice}}</span>元</p>
						</div>
						<div class="shohou clearfix">
							<a class="fl"><img :src="item.img" style="width: 64px;height: 64px;"/></a>
							<p class="fl"><a href="#">家用创意菜盘子圆盘 釉下彩复古</a><a href="#">{{item.bookPrice}}元</a></p>
							<p class="fr" v-if="item.orderStatus==1">
								<a >交易成功</a>
								<a href="orderxq.html" @click="details(item.orderId)">订单详情</a>
							</p>
							<p class="fr" v-if="item.orderStatus==0">
								<a @click="confirmReceipt(item.orderId)">确认收货</a>
								<a class="fl" @click="cancelOrder(item.orderId)">取消订单</a>
								<a href="orderxq.html" class="fr" v-on:click="details(item.orderId)">订单详情</a>
							</p>
							<p class="fr" v-if="item.orderStatus==2">
								<a >交易失败</a>
								<a href="orderxq.html" @click="details(item.orderId)">订单详情</a>
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--右下角导航栏返回顶部-->
		<div class="gotop">
			<a href="start.html">
				<dl>
					<dt><img src="../images/collection.png"/></dt>
					<dd>我的<br />收藏</dd>
				</dl>
			</a>
			<a href="sellbook.html" class="dh">
				<dl>
					<dt><img src="../images/addbook.png"/></dt>
					<dd>发布<br />图书</dd>
				</dl>
			</a>
			<a href="mygxin.html">
				<dl>
					<dt><img src="../images/gt3.png"/></dt>
					<dd>个人<br />中心</dd>
				</dl>
			</a>
			<a href="#" class="toptop" style="display: none">
				<dl>
					<dt><img src="../images/gt4.png"/></dt>
					<dd>返回<br />顶部</dd>
				</dl>
			</a>
			<p>400-800-8200</p>
		</div>
		<!--footer-->
		<div class="footer">
			<div style="margin-top: 30px;"></div>
			<p class="dibu">科院书城&copy;2019公司版权所有<br /> 本网站所列数据，除特殊说明，所有数据均为测试数据
			</p>
		</div>
	</body>
	<script>
		$(function () {
            $.ajax({
                url:"/../orderlist",
                type:"get",
                async: false,//使用同步的方式,true为异步方式
                data:{
                    userName:"王五"//localStorage.getItem("userName")
                },
                success:function(data){
                    v.datalist = data.data;
                    console.log(v.datalist);
                },
                fail:function(){
                    alert(error);
                }
            })
        })
        var v = new Vue({
            el: "#app",
            data: {
                datalist: []
            },
            methods: {
                details:function (orderId) {
                    localStorage.setItem("orderId",orderId);
                    console.log("缓存："+localStorage.getItem("orderId"));
					console.log("订单编号："+orderId)
                },
                confirmReceipt:function (orderId) {
                    $.ajax({
                        url:"/../confirmreceipt",
                        type:"post",
                        async: false,//使用同步的方式,true为异步方式
                        data:{
                            orderId:orderId
                        },
                        success:function(data){
                            location.reload()
                            console.log(data);
                        },
                        fail:function(){
                            alert(error);
                        }
                    })
                },
                cancelOrder:function (orderId) {
                    $.ajax({
                        url:"/../cancelorder",
                        type:"post",
                        async: false,//使用同步的方式,true为异步方式
                        data:{
                            orderId:orderId
                        },
                        success:function(data){
                            location.reload()
                            console.log(data);
                        },
                        fail:function(){
                            alert(error);
                        }
                    })
                }
            }
        });
	</script>
</html>
