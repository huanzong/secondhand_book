<!DOCTYPE html>
<html>

<head lang="en">
	<meta charset="utf-8" />
	<title>首页</title>
	<link rel="stylesheet" type="text/css" href="css/public.css" />
	<link rel="stylesheet" type="text/css" href="css/proList.css" />
	<link rel="stylesheet" href="js/layui/css/layui.css"  media="all">
	<script src="js/vue.min.js"></script>
	<script src="js/jquery-3.3.1.min.js"></script>
	<script src="js/jquery-1.12.4.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/public.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/nav.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/layui/layui.js" charset="utf-8"></script>
</head>

<body>
<!------------------------------head------------------------------>
<div class="head">
	<div class="wrapper clearfix">
		<div class="clearfix" id="top">
			<h1 class="fl"><a href="index.html"><img src="images/logo.png"/></a></h1>
			<div class="fr clearfix" id="top1">
				<p class="fl">
					<a href="login.html" id="login">登录</a>
					<a href="reg.html" id="reg">注册</a>
				</p>
				<form action="#" method="get" class="fl">
					<input type="text" placeholder="搜索" />
					<input type="button" />
				</form>
				<div class="btn fl clearfix">
					<a href="myinfo/mygxin.html"><img src="images/grzx.png" /></a>
					<a href="myinfo/start.html"><img src="images/collection.png" /></a>
				</div>
			</div>
		</div>
		<ul class="clearfix" id="bott">
			<li>
				<a href="index.html">首页</a>
			</li>
			<li>
				<a href="flowerDer.html">考试教育</a>
				<div class="sList2">
					<div class="clearfix">
						<a href="../flowerDer.html">公务员考试</a>
						<a href="../flowerDer.html">英语考试</a>
						<a href="../flowerDer.html">考研</a>
						<a href="../flowerDer.html">其他考试</a>
						<a href="../flowerDer.html">职称考试</a>
						<a href="../flowerDer.html">教辅书</a>
						<a href="../flowerDer.html">工具书</a>
					</div>
				</div>
			</li>
			<li>
				<a href="decoration.html">经济管理</a>
				<div class="sList2">
					<div class="clearfix">
						<a href="../flowerDer.html">成功励志</a>
						<a href="../flowerDer.html">管理</a>
						<a href="../flowerDer.html">经济金融</a>
					</div>
				</div>
			</li>
			<li>
				<a href="paint.html">文学艺术</a>
				<div class="sList2">
					<div class="clearfix">
						<a href="../flowerDer.html">收藏鉴赏</a>
						<a href="../flowerDer.html">艺术</a>
						<a href="../flowerDer.html">文学小说</a>
						<a href="../flowerDer.html">文化历史</a>
					</div>
				</div>
			</li>
			<li>
				<a href="../flowerDer.html">人文社科</a>
				<div class="sList2">
					<div class="clearfix">
						<a href="../flowerDer.html">新闻传播</a>
						<a href="../flowerDer.html">心理</a>
						<a href="../flowerDer.html">法律</a>
						<a href="../flowerDer.html">自然科学</a>
						<a href="../flowerDer.html">社会科学</a>
						<a href="../flowerDer.html">政治军事</a>
						<a href="../flowerDer.html">宗教哲学</a>
						<a href="../flowerDer.html">语言学习</a>
					</div>
				</div>
			</li>
			<li>
				<a href="../flowerDer.html">科学技术</a>
				<div class="sList2">
					<div class="clearfix">
						<a href="../flowerDer.html">汽车与交通运输</a>
						<a href="../flowerDer.html">医学卫生</a>
						<a href="../flowerDer.html">计算机与网络</a>
						<a href="../flowerDer.html">科技工程</a>
						<a href="../flowerDer.html">建筑</a>
					</div>
				</div>
			</li>
			<li>
				<a href="../flowerDer.html">生活休闲</a>
				<div class="sList2">
					<div class="clearfix">
						<a href="../flowerDer.html">生活时尚</a>
						<a href="../flowerDer.html">家庭育儿</a>
						<a href="../flowerDer.html">旅游地理</a>
						<a href="../flowerDer.html">体育保健</a>
						<a href="../flowerDer.html">少儿</a>
					</div>
				</div>
			</li>
		</ul>
	</div>
</div>

<!-----------------address------------------------------->
<div class="address">
	<div class="wrapper clearfix">
		<a href="index.html">首页</a>
		<span>/</span>
		<a href="paint.html" class="on">全部书籍</a>
	</div>
</div>
<!-----------------paintCon------------------------------->
<div class="paintCon" id="app">
	<section class="wrapper">
		<div class="paintList">
			<a href="proDetail.html" v-for = "item,index in datalist" :id="item.bookId" @click="looked(index,item.bookId)">
				<dl>
					<dt><img :src="item.bookPicture"></dt>
					<dd>{{item.bookName}}</dd>
					<dd>￥{{item.bookPrice}}</dd>
				</dl>
			</a>
		</div>
	</section>
</div>
<div id="page" style="margin-left: 28%"></div>
<!--右下角导航栏返回顶部-->
<div class="gotop">
	<a href="myinfo/start.html">
		<dl>
			<dt><img src="images/collection.png"/></dt>
			<dd>我的<br />收藏</dd>
		</dl>
	</a>
	<a href="myinfo/sellbook.html" class="dh">
		<dl>
			<dt><img src="images/addbook.png"/></dt>
			<dd>发布<br />图书</dd>
		</dl>
	</a>
	<a href="myinfo/mygxin.html">
		<dl>
			<dt><img src="images/gt3.png"/></dt>
			<dd>个人<br />中心</dd>
		</dl>
	</a>
	<a href="#" class="toptop" style="display: none">
		<dl>
			<dt><img src="images/gt4.png"/></dt>
			<dd>返回<br />顶部</dd>
		</dl>
	</a>
	<p>400-800-8200</p>
</div>
<!--footer-->
<div class="footer">
	<div style="margin-top: 30px;"></div>
	<p class="dibu">科院书城&copy;2019公司版权所有<br /> 本网站所列数据，除特殊说明，所有数据均为测试数据
	</p>
</div>

<script>
    layui.use(['laypage', 'layer'], function(){
        var laypage = layui.laypage
            ,layer = layui.layer;
        //分页显示
        laypage.render({
            elem: 'page'//指向存放分页的容器，值可以是容器ID、DOM对象
            ,count: v.count//数据总条数
            ,limit: 4//每页显示条数
            ,theme: '#FF5722'
            ,layout: ['count', 'prev', 'page', 'next', 'refresh', 'skip']
            ,jump: function(obj){
                findBookListPage(obj.curr,obj.limit);
                v.size = obj.limit;
//                console.log(v.size);
//                console.log(obj.curr)
//                console.log(obj)
            }
        });
    });
</script>
<script>
    $(function(){
        findBookListPage(1,4);
    })
    //查询数据的请求，
    function findBookListPage(pageIndex,pageSize) {
        //console.log("页数："+pageIndex+"条数："+pageSize);
        $.ajax({
            url:"booklist",
            type:"get",
            async: false,//使用同步的方式,true为异步方式
            data:{
                pageIndex:pageIndex//localStorage.getItem("uname")
                ,pageSize:pageSize
            },
            success:function(data){
                v.datalist = data.data.list;
                v.count = data.data.rowCount;
            },
            fail:function(){
                alert(error);
            }
        })
    }
    var v = new Vue({
        el: "#app",
        data: {
            datalist: [],
            pageIndex:1,
            pageSize:4,
			count:0
        },
        methods: {
            looked:function (index,bookId,event) {
                console.log(index+"______"+bookId);
				localStorage.setItem("bookId",bookId);
				//console.log("缓存图书ID："+localStorage.getItem("bookId"));
            }
        }
    });
</script>

</body>
</html>